<div class="payment-container">
  <div class="payment-card">
    <h2 class="payment-title">Thanh toán VNPay</h2>
    
    <form (ngSubmit)="onSubmit()" #paymentForm="ngForm" class="payment-form">
      <div class="form-group">
        <label for="amount">Số tiền (VND):</label>
        <input 
          type="number" 
          id="amount" 
          name="amount"
          [(ngModel)]="paymentData.amount"
          required
          min="1000"
          class="form-control"
          placeholder="Nhập số tiền cần thanh toán">
      </div>

      <div class="form-group">
        <label for="bankCode">Ngân hàng:</label>
        <select 
          id="bankCode" 
          name="bankCode"
          [(ngModel)]="paymentData.bankCode"
          class="form-control">
          <option *ngFor="let bank of banks" [value]="bank.code">
            {{ bank.name }}
          </option>
        </select>
      </div>

      <div class="form-group">
        <label for="language">Ngôn ngữ:</label>
        <select 
          id="language" 
          name="language"
          [(ngModel)]="paymentData.language"
          class="form-control">
          <option *ngFor="let lang of languages" [value]="lang.code">
            {{ lang.name }}
          </option>
        </select>
      </div>

      <div class="form-group">
        <label for="orderInfo">Thông tin đơn hàng:</label>
        <input 
          type="text" 
          id="orderInfo" 
          name="orderInfo"
          [(ngModel)]="paymentData.orderInfo"
          class="form-control"
          placeholder="Nhập thông tin đơn hàng">
      </div>

      <div class="form-actions">
        <button 
          type="submit" 
          class="btn btn-primary"
          [disabled]="isLoading || !paymentData.amount || paymentData.amount <= 0">
          <span *ngIf="isLoading" class="spinner"></span>
          {{ isLoading ? 'Đang xử lý...' : 'Thanh toán' }}
        </button>
        <button 
          type="button" 
          class="btn btn-secondary"
          (click)="resetForm()">
          Làm mới
        </button>
      </div>
    </form>

    <!-- Error Message -->
    <div *ngIf="errorMessage" class="alert alert-danger">
      {{ errorMessage }}
    </div>

    <!-- Success Result -->
    <div *ngIf="paymentResult" class="alert alert-success">
      <h4>Thành công!</h4>
      <p><strong>Mã đơn hàng:</strong> {{ paymentResult.orderId }}</p>
      <p><strong>Số tiền:</strong> {{ formatCurrency(paymentResult.amount) }}</p>
      <p><strong>URL thanh toán:</strong></p>
      <a [href]="paymentResult.data" target="_blank" class="payment-url">
        {{ paymentResult.data }}
      </a>
      <div class="mt-3">
        <button 
          class="btn btn-success"
          (click)="openPaymentPage()">
          Mở trang thanh toán
        </button>
      </div>
    </div>
  </div>
</div> 