<div class="all">
  <div class="container">
    <!-- Left Section -->
    <div class="left-section">
      <h1>Đặt lại mật khẩu</h1>
      <p>Vui lòng nhập mật khẩu mới cho tài khoản <strong>{{ email }}</strong></p>
      <div class="divider"></div>
    </div>

    <!-- Right Section -->
    <div class="right-section">
      <h3>Tạo mật khẩu mới</h3>

      <form #resetForm="ngForm" (ngSubmit)="onSubmit(resetForm)">
        <!-- Hidden OTP field -->
        <input type="hidden" name="otp" [(ngModel)]="otp" required>

        <!-- New Password -->
        <div>
          <label for="newPassword" class="form-label">Mật khẩu mới</label>
          <input
            type="password"
            id="newPassword"
            name="newPassword"
            [(ngModel)]="newPassword"
            #newPass="ngModel"
            placeholder="Nhập mật khẩu mới"
            required
            minlength="6"
            [disabled]="isLoading"
          />
          <small class="text-danger" *ngIf="newPass.invalid && newPass.touched">
            ❌ Vui lòng nhập mật khẩu mới (ít nhất 6 ký tự)
          </small>
        </div>

        <!-- Confirm Password -->
        <div>
          <label for="confirmPassword" class="form-label">Xác nhận mật khẩu</label>
          <input
            type="password"
            id="confirmPassword"
            name="confirmPassword"
            [(ngModel)]="confirmPassword"
            #confirmPass="ngModel"
            placeholder="Nhập lại mật khẩu mới"
            required
            [disabled]="isLoading"
          />
          <small class="text-danger" *ngIf="passwordMismatch">
            ❌ Mật khẩu xác nhận không khớp
          </small>
        </div>

        <!-- Error Message -->
        <p *ngIf="errorMessage" class="text-danger text-center">{{ errorMessage }}</p>

        <!-- Success Message -->
        <p *ngIf="successMessage" class="text-success text-center">{{ successMessage }}</p>

        <!-- Submit Button -->
        <button type="submit" [disabled]="!isFormValid || isLoading">
          <span *ngIf="!isLoading">Đặt lại mật khẩu</span>
          <span *ngIf="isLoading">⏳ Đang xử lý...</span>
        </button>

        <!-- Back to login -->
        <div class="register-option">
          <span>Đã có mật khẩu?</span>
          <a [routerLink]="['/dangnhap']" class="register-link">Quay lại đăng nhập</a>
        </div>
      </form>
    </div>
  </div>
</div>
