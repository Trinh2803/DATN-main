
<div class="product-list">
  <div *ngFor="let product of data" class="product-card">
    <div class="product-image">
      <span class="discount-tag" *ngIf="hasDiscount(product)">
        Gi·∫£m {{ calculateDiscount(product) }}%
      </span>
      <span class="new-tag" *ngIf="product?.createdAt && isNewProduct(product.createdAt)">NEW</span>
      <span class="hot-star blink-hot" *ngIf="title === 'S·∫£n ph·∫©m hot'">üî• HOT</span>
      <span class="out-of-stock-tag" *ngIf="!isInStock(product)">H·∫øt h√†ng</span>
      <button class="favorite-btn" (click)="toggleFavorite(product)">
        <i [class]="product && product._id && isFavorite(product) ? 'fas fa-heart' : 'far fa-heart'"></i>
      </button>
      <a [routerLink]="['/chitiet', product._id]">
        <img *ngIf="product && product._id" src="http://localhost:3000{{product.thumbnail}}" alt="{{product.name}}">
      </a>
    </div>
    <div class="product-info">
      <h3 class="product-title">
        <a *ngIf="product && product._id" style="text-decoration: none;" [routerLink]="['/chitiet', product._id]">{{product.name}}</a>
      </h3>
      <div class="variant-info" *ngIf="product.variants && product.variants.length > 0">
        <span class="variant-count">{{product.variants.length}} k√≠ch th∆∞·ªõc</span>
      </div>
      <div class="product-price">
        <span class="current-price">
          {{ getCurrentPrice(product) | number:'1.0-0' }}‚Ç´
        </span>
        <span class="old-price" *ngIf="hasDiscount(product)">
          {{ getOriginalPrice(product) | number:'1.0-0' }}‚Ç´
        </span>
        <div class="price-from-info" *ngIf="product.variants && product.variants.length > 0">
          <small class="price-from-text">Gi√° t·ª´</small>
        </div>
      </div>
    </div>
    <div class="product-actions">
      <button class="add-to-cart-btn"
              (click)="addToCart(product)"
              [disabled]="!isInStock(product)">
        {{ !isInStock(product) ? 'H·∫øt h√†ng' : 'Th√™m v√†o gi·ªè' }}
      </button>
      <button class="buy-now-btn"
              (click)="buyNow(product)"
              [disabled]="!isInStock(product)">
        Mua ngay
      </button>
    </div>
  </div>
</div>

