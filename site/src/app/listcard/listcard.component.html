<div class="product-card">
  <div class="product-image">
    <!-- Hi·ªÉn th·ªã discount-tag cho s·∫£n ph·∫©m sale -->
    <span class="discount-tag" *ngIf="hasDiscount(product)">
      Gi·∫£m {{ calculateDiscount(product) }}%
    </span>
    <!-- Hi·ªÉn th·ªã new-tag ch·ªâ khi kh√¥ng ph·∫£i s·∫£n ph·∫©m sale -->
    <span class="new-tag" *ngIf="product?.createdAt && isNewProduct(product.createdAt)">NEW</span>
    <span class="hot-star blink-hot" *ngIf="title === 'S·∫£n ph·∫©m hot'">üî• HOT</span>
    <!-- Hi·ªÉn th·ªã out-of-stock tag -->
    <span class="out-of-stock-tag" *ngIf="!isInStock(product)">H·∫øt h√†ng</span>
    <!-- N√∫t y√™u th√≠ch -->
    <button class="favorite-btn" (click)="toggleFavorite(product)">
      <i [class]="isFavorite(product) ? 'fas fa-heart' : 'far fa-heart'"></i>
    </button>

    <!-- Th√™m routerLink v√†o ·∫£nh -->
    <a [routerLink]="['/chitiet', product._id]">
      <img src="http://localhost:3000{{product.thumbnail}}" alt="{{product.name}}">
    </a>
  </div>
  <div class="product-info">
    <!-- Th√™m routerLink v√†o t√™n s·∫£n ph·∫©m -->
    <h3 class="product-title">
      <a style="text-decoration: none;" [routerLink]="['/chitiet', product._id]">{{product.name}}</a>
    </h3>

    <!-- Hi·ªÉn th·ªã th√¥ng tin bi·∫øn th·ªÉ n·∫øu c√≥ -->
    <div class="variant-info" *ngIf="product.variants && product.variants.length > 0">
      <span class="variant-count">{{product.variants.length}} k√≠ch th∆∞·ªõc</span>
    </div>

    <div class="product-price">
      <span class="current-price">
        {{ getCurrentPrice(product) | number:'1.0-0' }}‚Ç´
      </span>

      <span class="old-price" *ngIf="hasDiscount(product)">
        {{ getOriginalPrice(product) | number:'1.0-0' }}‚Ç´
      </span>
      
      <!-- Hi·ªÉn th·ªã th√¥ng tin "Gi√° t·ª´" khi c√≥ bi·∫øn th·ªÉ -->
      <div class="price-from-info" *ngIf="product.variants && product.variants.length > 0">
        <small class="price-from-text">Gi√° t·ª´</small>
      </div>
    </div>
  </div>

  <!-- N√∫t h√†nh ƒë·ªông -->
  <div class="product-actions">
    <!-- N√∫t th√™m v√†o gi·ªè -->
    <button class="add-to-cart-btn"
            (click)="addToCart(product)"
            [disabled]="!isInStock(product)">
      {{ !isInStock(product) ? 'H·∫øt h√†ng' : 'Th√™m v√†o gi·ªè' }}
    </button>

    <!-- N√∫t mua ngay -->
    <button class="buy-now-btn"
            (click)="buyNow(product)"
            [disabled]="!isInStock(product)">
      Mua ngay
    </button>
  </div>
</div>

